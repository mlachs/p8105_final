---
title: "ml5222"
author: "Miriam Lachs"
date: "2024-11-07"
output: html_document
---

Space where Miriam is working 

```{r}
library(tidyverse)
library(httr)

res=GET('https://developer.nps.gov/api/v1/parks?limit=500&api_key=B9nDpbkbrb3kSOjz6kXSxMJ3d6MSpUvt1QqYdeyn')

data = res %>% content("text") %>% jsonlite::fromJSON() %>% as_tibble()
```

```{r}
NPS_data_parks=data %>% unnest(data) %>% select(fullName,description,latitude,longitude,activities,states,entranceFees,operatingHours,designation) %>% unnest(activities,names_sep = '_') %>% unnest(entranceFees,names_sep = '_') %>% unnest(operatingHours,names_sep = '_') 
```

```{r}
NPS_data_parks %>%select(fullName,entranceFees_cost,entranceFees_title,states) %>% 
  mutate(entranceFees_cost=as.numeric(entranceFees_cost)) %>% 
filter(entranceFees_title=='Entrance - Per Person') %>% distinct() %>% group_by(states) %>% 
  summarise(meanFee=mean(entranceFees_cost,na.rm = TRUE)) %>% 
ggplot(aes(x=states,y=meanFee))+geom_point()
```

